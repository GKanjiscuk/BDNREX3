# ðŸ“¦ Guia de Testes - Mercado Livre BDNR (Spring Boot + Mongo + Redis)

Este documento descreve o fluxo passo a passo para testar as funcionalidades da aplicaÃ§Ã£o, incluindo a persistÃªncia no MongoDB, o cache Redis-First e o sistema de autenticaÃ§Ã£o/permissÃµes (Atividades EX2 e EX3).

## âš™ï¸ 1. ConfiguraÃ§Ã£o PrÃ©via

Antes de iniciar, certifique-se de que o arquivo `src/main/resources/application.properties` estÃ¡ configurado corretamente com:
1.  **MongoDB Atlas:** URI de conexÃ£o vÃ¡lida e `spring.data.mongodb.database=BDNR`.
2.  **Redis Cloud:** Host, Porta e Senha configurados.

---

## ðŸ§ª 2. Fluxo de ExecuÃ§Ã£o

### Passo 1: Primeira ExecuÃ§Ã£o e "Setup" (Popular Banco)
Como o banco de dados pode estar vazio e o sistema exige login, criamos um comando de inicializaÃ§Ã£o.

1.  Inicie a aplicaÃ§Ã£o (`MercadolivreApplication`).
2.  No prompt de login, utilize o comando secreto de setup:
    * **E-mail:** `setup`
    * **Enter**
3.  **Resultado Esperado:** O console mostrarÃ¡ logs do `DatabaseSeeder` limpando o banco e criando:
    * 1 Administrador
    * 2 Vendedores (com senhas criptografadas)
    * 2 Clientes (com senhas criptografadas)
    * Produtos iniciais e Compras.

---

### Passo 2: Teste de Administrador & SincronizaÃ§Ã£o (EX3)
O Administrador Ã© o Ãºnico perfil autorizado a mover dados entre Redis e Mongo.

1.  FaÃ§a login como Admin:
    * **E-mail:** `admin@fatec.com`
    * **Senha:** `123456`
2.  No Menu Principal, observe que o "Tipo" Ã© **Administrador**.
3.  Acesse a opÃ§Ã£o **`6. âš¡ EX3: GERENCIAR SINCRONIZAÃ‡ÃƒO/MIGRAÃ‡ÃƒO`**.
4.  Teste a **OpÃ§Ã£o 1 (Migrar Mongo -> Redis)**:
    * Isso carregarÃ¡ produtos do banco de dados para o cache Redis para serem manipulados.
5.  Teste a **OpÃ§Ã£o 2 (Sincronizar Redis -> Mongo)**:
    * Isso pegarÃ¡ tudo que estÃ¡ no Redis, salvarÃ¡ definitivamente no MongoDB (Commit) e limparÃ¡ o cache.

---

### Passo 3: Teste de Vendedor (Redis-First & PermissÃµes)
O Vendedor manipula produtos, mas as alteraÃ§Ãµes ocorrem primeiro no Redis.

1.  FaÃ§a Logout (OpÃ§Ã£o 7) e logue como Vendedor:
    * **E-mail:** `vendedor@teste.com`
    * **Senha:** `123456`
2.  No Menu Principal, vÃ¡ para **`3. Gerenciar Produtos`**.
3.  **Crie um Produto (OpÃ§Ã£o 1)**:
    * Preencha os dados.
    * **Observe:** O sistema **nÃ£o** pede o ID do Vendedor. Ele identifica automaticamente que Ã© o "JoÃ£o da Silva" criando.
    * **Resultado:** "Produto criado com sucesso! (Salvo no Redis)".
4.  **Tente Sincronizar (Teste de SeguranÃ§a)**:
    * Volte ao Menu Principal.
    * Tente acessar a opÃ§Ã£o **`6. EX3`**.
    * **Resultado Esperado:** Mensagem de `âš ï¸ ACESSO NEGADO`. Vendedores nÃ£o podem comitar dados no banco principal.

---

### Passo 4: Teste de Cliente (Bloqueios)
O Cliente consome dados, mas nÃ£o pode alterÃ¡-los.

1.  FaÃ§a Logout e logue como Cliente:
    * **E-mail:** `vinicius@gmail.com`
    * **Senha:** `123456`
2.  VÃ¡ para **`3. Gerenciar Produtos`**.
3.  Tente **Criar um Produto (OpÃ§Ã£o 1)** ou **Deletar (OpÃ§Ã£o 4)**.
    * **Resultado Esperado:** `â›” ACESSO NEGADO`.
4.  VÃ¡ para **`4. Gerenciar Compras`**.
5.  FaÃ§a uma compra normalmente (isso gera um registro direto no MongoDB).

---

### Passo 5: Validando a PersistÃªncia (A Prova Real)

Para provar que o sistema funciona conforme o exercÃ­cio pede (Redis-First):

1.  Logue como **Vendedor**.
2.  Crie um produto chamado "Teste Redis".
3.  VÃ¡ no seu **MongoDB Atlas (Web)** e verifique a coleÃ§Ã£o `produtos`.
    * **O produto "Teste Redis" NÃƒO deve estar lÃ¡ ainda.** (Ele estÃ¡ apenas no Redis Cloud).
4.  FaÃ§a Logout e logue como **Administrador**.
5.  VÃ¡ na opÃ§Ã£o **6** e escolha **`2. Sincronizar REDIS -> MONGODB`**.
6.  Atualize o **MongoDB Atlas**.
    * **Agora o produto "Teste Redis" deve aparecer.**

---

## ðŸ“‹ Resumo de Logins

| Perfil | E-mail | Senha | PermissÃµes Principais |
| :--- | :--- | :--- | :--- |
| **Setup** | `setup` | *(n/a)* | Popula o Banco de Dados |
| **Admin** | `admin@fatec.com` | `123456` | Sync Mongo/Redis, CRUD Total |
| **Vendedor** | `vendedor@teste.com` | `123456` | CRUD Produtos PrÃ³prios (Redis) |
| **Cliente** | `vinicius@gmail.com` | `123456` | Comprar, Favoritar, Ler Dados |